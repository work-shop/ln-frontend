{% macro section( insight, item, shift ) %}

        {{ sectionContent( insight, item, shift ) }}

{% endmacro %}



{% macro sectionContent( insight, item, padding ) %}

    {% if insight.image %}
        {% set imageShift = 12 %}
    {% else %}
        {% set imageShift = 8 %}
    {% endif %}



    {% if insight.introduction %}
    <section class="insight container conversational pb2" {% if insight.image %}data-shift-v="-{{ (padding * imageShift) }}"{% endif %}>
        <div class="content-region row thick-border-page-color ml1 mr1 pt4 pb2 mb2">
            {% if insight.title %}
                <div class="col-sm-10 offset-sm-1 centered mb2">
                    <h2 class="insight-title page-color"><span class="border-bottom-page-color"> {{ insight.title }} </h2>
                </div>
            {% endif %}
            {% if insight.image %}
                <div class="col-sm-6 offset-sm-1">
                    {{ insight.introduction|safe }}
                </div>
                <div class="col-sm-5" data-shift-v="8" data-shift-h="2">
                    <img class="insight-image thin-border-page-color" src="{{ insight.image.sizes.story }}">
                    {% if insight.image.caption %}
                    <p class="caption">{{ insight.image.caption }}</p>
                    {% endif %}
                </div>
            {% else %}
                <div class="col-sm-10 offset-sm-1">
                    <p> {{ insight.introduction }} </p>
                </div>
            {% endif %}
        </div>
        <div class="row thin-border-page-color {% if insight.image %}pt6{% else %}pt4{% endif %} pb2 mb2 ml1 mr1 ">
            <div class="col-sm-10 offset-sm-1 wysiwyg">
                {{ insight.content|safe }}
            </div>
        </div>
        </section>

    {% elseif insight.title %}

        {% if insight.image %}

            <section class="insight container pb2 conversational" {% if insight.image %}data-shift-v="-{{ (padding * imageShift) }}"{% endif %}>
            <div class="row ml1 mr1 pt4 pb2 mb2">

                <div class="offset-sm-7 col-sm-5" data-shift-v="8" data-shift-h="2">
                    <img class="insight-image thin-border-page-color" src="{{ insight.image.sizes.story }}">
                    {% if insight.image.caption %}
                    <p class="caption">{{ insight.image.caption }}</p>
                    {% endif %}
                </div>

            </div>
            <div class="row thin-border-page-color p2 mb2 ml1 mr1 content-region">
                <div class="col-sm-10 offset-sm-1 centered" data-shift-v="-8">
                    <h2 class="insight-title page-color"><span class="border-bottom-page-color"> {{ insight.title }} </span></h2>
                </div>
                <div class="col-sm-10 offset-sm-1 wysiwyg">
                    {{ insight.content|safe }}
                </div>
            </div>
            </section>


        {% else %}
            <section class="insight container pb2 conversational" data-shift-v="-{{ (padding * imageShift) }}">
            <div class="row">
                <div class="col-sm-12 centered">
                    <h2 class="insight-title page-color"><span class="border-bottom-page-color"> {{ insight.title }} </span></h2>
                </div>
            </div>
            <div class="row ml1 mr1 thin-border-page-color mb4 {% if insight.image %}pt6{% else %}pt4{% endif %} ">
                <div class="col-sm-10 offset-sm-1 wysiwyg">
                    {{ insight.content|safe }}
                </div>
            </div>
            </section>

        {% endif %}

    {% elseif insight.image %}
        <section class="insight container pb2 conversational" {% if insight.image %}data-shift-v="-{{ (padding * imageShift) }}"{% endif %}>
        <div class="row ml1 mr1 pt4 pb2 mb2">
            <div class="offset-sm-7 col-sm-5" data-shift-v="8" data-shift-h="2">
                <img class="insight-image thin-border-page-color" src="{{ insight.image.sizes.story }}">
                {% if insight.image.caption %}
                <p class="caption">{{ insight.image.caption }}</p>
                {% endif %}
            </div>
        </div>
        <div class="row thin-border-page-color pt6 pb2 mb2 ml1 mr1">
            <div class="col-sm-10 offset-sm-1 wysiwyg">
                {{ insight.content|safe }}
            </div>
        </div>
        </section>
    {% else %}
        <section class="insight container pb2 conversational" {% if insight.image %}data-shift-v="-{{ (padding * imageShift) }}"{% endif %}>
        <div class="row thin-border-page-color pt6 pb2 mb2 ml1 mr1">
            <div class="col-sm-10 offset-sm-1 wysiwyg">
                {{ insight.content|safe }}
            </div>
        </div>
        </section>
    {% endif %}
{% endmacro %}
